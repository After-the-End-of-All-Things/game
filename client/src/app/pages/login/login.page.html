<ion-content [fullscreen]="true">
  <ion-grid>
    <ion-row class="full-width">
      <ion-col
        sizeSm="12"
        sizeXs="12"
        sizeMd="6"
        sizeXl="6"
        class="full-width image-container"
      >
        <ion-card>
          <ion-img src="assets/bg/home.png" />
        </ion-card>
      </ion-col>
    </ion-row>

    <ion-row class="full-width">
      <ion-col
        sizeSm="12"
        sizeXs="12"
        sizeMd="6"
        sizeXl="6"
        class="full-width blog-container"
      >
        <ion-card>
          <ion-card-header>
            <ion-card-title>
              Latest Oats: {{ announcementService.latestAnnouncement.title }}
            </ion-card-title>
          </ion-card-header>

          <ion-card-content>
            {{ announcementService.latestAnnouncement.summary }}

            <br />
            <br />
            <a
              [href]="announcementService.latestAnnouncement.link"
              target="_blank"
            >
              Read more...
            </a>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>

    <ion-row class="full-width">
      <ion-col
        sizeSm="12"
        sizeXs="12"
        sizeMd="6"
        sizeXl="6"
        class="full-width auth-container"
      >
        <ion-segment [(ngModel)]="authType" color="tertiary">
          <ion-segment-button value="login">Login</ion-segment-button>
          <ion-segment-button value="register">Register</ion-segment-button>
        </ion-segment>

        <ion-card class="full-width auth" *ngIf="authType === 'login'">
          <ion-card-content [formGroup]="loginForm">
            <ion-list>
              <ion-item>
                <ion-input
                  label="Email"
                  labelPlacement="stacked"
                  type="text"
                  placeholder="myemail@mydomain.com"
                  formControlName="email"
                  errorText="Email must be valid."
                  (keyup.enter)="login()"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-input
                  label="Password"
                  labelPlacement="stacked"
                  type="password"
                  placeholder="Minimum of 8 characters"
                  formControlName="password"
                  errorText="Password must be at least 8 characters."
                  (keyup.enter)="login()"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-text color="danger" *ngIf="loginError">
                  {{ loginError }}
                </ion-text>
              </ion-item>
            </ion-list>

            <div class="actions">
              <ion-button
                fill="clear"
                color="warning"
                (click)="loginForm.reset()"
              >
                Clear
              </ion-button>
              <ion-button
                fill="clear"
                [disabled]="!loginForm.valid"
                (click)="login()"
              >
                Login
              </ion-button>
            </div>
          </ion-card-content>
        </ion-card>

        <ion-card class="full-width auth" *ngIf="authType === 'register'">
          <ion-card-content [formGroup]="registerForm">
            <ion-list>
              <ion-item>
                <ion-input
                  label="Email"
                  labelPlacement="stacked"
                  type="text"
                  placeholder="myemail@mydomain.com"
                  formControlName="email"
                  errorText="Email must be valid."
                  (keyup.enter)="register()"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-input
                  label="Password"
                  labelPlacement="stacked"
                  type="password"
                  placeholder="Minimum of 8 characters"
                  formControlName="password"
                  errorText="Password must be at least 8 characters."
                  (keyup.enter)="register()"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-input
                  label="Username"
                  labelPlacement="stacked"
                  type="text"
                  placeholder="Between 2 and 20 characters"
                  formControlName="username"
                  errorText="Username must be between 2 and 20 characters."
                  (keyup.enter)="register()"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-text color="danger" *ngIf="registerError">
                  {{ registerError }}
                </ion-text>
              </ion-item>
            </ion-list>

            <div class="actions">
              <ion-button
                fill="clear"
                color="warning"
                (click)="registerForm.reset()"
              >
                Clear
              </ion-button>
              <ion-button
                fill="clear"
                [disabled]="!registerForm.valid"
                (click)="register()"
              >
                Register
              </ion-button>
            </div>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
